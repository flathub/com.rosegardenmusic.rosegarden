{
    "app-id": "com.rosegardenmusic.rosegarden",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.15-24.08",
    "sdk": "org.kde.Sdk",
    "command": "rosegarden",
    "rename-appdata-file": "rosegarden.appdata.xml",
    "rename-icon": "rosegarden",
    "rename-mime-file": "rosegarden.xml",
    "rename-mime-icons": [
        "application-x-rosegarden-composition",
        "application-x-rosegarden-device",
        "application-x-rosegarden-project",
        "application-x-rosegarden-template"
    ],
    "finish-args": [
        "--share=ipc",
        "--socket=x11",
        "--socket=pulseaudio",
        "--device=dri",
        "--filesystem=xdg-run/pipewire-0",
        "--filesystem=home",
        "--env=TMPDIR=/var/tmp",
        "--env=ALSA_CONFIG_PATH=",
        "--env=DSSI_PATH=/app/extensions/Plugins/dssi",
        "--env=LADSPA_PATH=/app/extensions/Plugins/ladspa:/app/lib/ladspa"
    ],
    "add-extensions": {
        "org.freedesktop.LinuxAudio.Plugins": {
            "directory": "extensions/Plugins",
            "version": "24.08",
            "add-ld-path": "lib",
            "merge-dirs": "ladspa;dssi;lv2",
            "subdirectories": true,
            "no-autodownload": true
        }
    },
    "cleanup": [
        "/share/aclocal",
        "/share/man",
        "/share/doc",
        "/share/info",
        "/share/gtk-doc",
        "/include",
        "/lib/pkgconfig",
        "/lib/cmake",
        "*.la"
    ],
    "modules": [
        "shared-modules/linux-audio/lrdf.json",
        "shared-modules/linux-audio/liblo.json",
        "shared-modules/linux-audio/fftw3f.json",
        "shared-modules/linux-audio/dssi.json",
        "shared-modules/linux-audio/lv2.json",
        "shared-modules/linux-audio/lilv.json",
        {
            "name": "rosegarden",
            "buildsystem": "cmake-ninja",
            "post-install": [
                "mv /app/bin/rosegarden{,.bin}",
                "install -Dm755 rosegarden.sh /app/bin/rosegarden",
                "install -d /app/extensions/Plugins"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/rosegarden/rosegarden/25.06/rosegarden-25.06.tar.xz",
                    "sha256": "75fe52b005899471cc4b0e4954be5d35ee1ce8f41659ab8ef48a26178aa5c36d",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 8939,
                        "url-template": "https://downloads.sourceforge.net/project/rosegarden/rosegarden/$version/rosegarden-$version.tar.xz"
                    }
                },
                {
                    "type": "script",
                    "commands": [
                        "export LV2_PATH=/app/lib/lv2:/app/extensions/Plugins/lv2:$HOME/.lv2",
                        "exec rosegarden.bin \"$@\""
                    ],
                    "dest-filename": "rosegarden.sh"
                }
            ]
        }
    ]
}
